package br.com.ecoffee.service.carrinho;

import java.util.List;

import javax.transaction.Transactional;

import org.springframework.stereotype.Service;

import br.com.ecoffee.factory.carrinho.CarrinhoDeCompraFactory;
import br.com.ecoffee.model.carrinho.Carrinho;
import br.com.ecoffee.model.produto.Produto;
import br.com.ecoffee.repository.carrinho.CarrinhoRepository;

@Service
public class CarrinhoDeCompraService {

	private CarrinhoRepository carrinhoRepository;
	private CarrinhoDeCompraFactory carrinhoFactory;

	public CarrinhoDeCompraService(CarrinhoRepository carrinhoRepository, CarrinhoDeCompraFactory carrinhoFactory) {
		this.carrinhoRepository = carrinhoRepository;
		this.carrinhoFactory = carrinhoFactory;
	}

	@Transactional
	public Carrinho inserirProduto(Long idProduto, Long idCliente, Integer quantidade) {

		Carrinho carrinhoDeCompra = carrinhoFactory.criarCarrinhoDeCompra(idProduto, idCliente, quantidade);
		
		Carrinho novoCarrinhoDeCompras = carrinhoRepository.save(carrinhoDeCompra);

		return novoCarrinhoDeCompras;
	}

	public List<Produto> buscarProdutosNoCarrinho(Long idCliente) {

		List<Produto> produtos = carrinhoRepository.findProdutosByIdCliente(idCliente);
		
		
		return null;
	}

}
